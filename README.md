High-Dimensional Bayesian Optimization with Additive Structure Learning (BOAD)
BOAD æ˜¯ä¸€ä¸ªç”¨äºè§£å†³é«˜ç»´é»‘ç›’ä¼˜åŒ–é—®é¢˜çš„è´å¶æ–¯ä¼˜åŒ–æ¡†æ¶ã€‚å®ƒé€šè¿‡è‡ªåŠ¨å‘ç°ç›®æ ‡å‡½æ•°å†…éƒ¨çš„åŠ æ€§ç»“æ„ï¼ˆAdditive Structureï¼‰ï¼Œå°†é«˜ç»´é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªä½ç»´å­é—®é¢˜è¿›è¡Œå¹¶è¡Œæ±‚è§£ï¼Œä»è€Œæ˜¾è‘—æå‡æœç´¢æ•ˆç‡ã€‚

æœ¬é¡¹ç›®é›†æˆäº†å¤šç§å…ˆè¿›ç‰¹æ€§ï¼ŒåŒ…æ‹¬åŸºäº SHAP å’Œ Friedman H-Statistic çš„ç»“æ„å­¦ä¹ ç®—æ³•ã€æ™ºèƒ½å†·çƒ­å¯åŠ¨ç­–ç•¥ï¼ˆCold/Warm Startï¼‰ã€ä»¥åŠå®Œå–„çš„ Regret è¿½è¸ªä¸å¯è§†åŒ–ç³»ç»Ÿã€‚

ğŸš€ ä¸»è¦ç‰¹æ€§ (Features)
è‡ªé€‚åº”ç»“æ„å­¦ä¹ ï¼šæ”¯æŒ SHAP (åŸºäºæ ‘è§£é‡Šå™¨) å’Œ Friedman H-Statistic (åŸºäºåä¾èµ–) ä¸¤ç§æ–¹æ³•è‡ªåŠ¨å‘ç°å˜é‡åˆ†ç»„ã€‚

åŒé˜¶æ®µä¼˜åŒ–ç­–ç•¥ï¼š

Phase 1 (Standard BO): å…¨ç»´æ¢ç´¢ï¼Œç§¯ç´¯åˆå§‹æ•°æ®ã€‚

Phase 2 (Adaptive BO): åŸºäºå­¦ä¹ åˆ°çš„ç»“æ„ï¼Œåœ¨ä½ç»´å­ç©ºé—´å¹¶è¡Œé‡‡é›†ã€‚

Oracle å®éªŒæ”¯æŒï¼šæ”¯æŒæ³¨å…¥â€œä¸Šå¸è§†è§’â€çš„å·²çŸ¥ç»“æ„ï¼ˆå¦‚ Block æˆ– Sparseï¼‰ï¼Œç”¨äºè¯„ä¼°ç»“æ„å­¦ä¹ ç®—æ³•çš„å‡†ç¡®æ€§ä¸Šé™ã€‚

å·¥ç¨‹åŒ–ä¿éšœï¼š

æ˜¾å­˜é˜²æ³„æ¼ï¼šè‡ªåŠ¨ç®¡ç† GPU æ˜¾å­˜ï¼Œæ”¯æŒé•¿æœŸç¨³å®šè¿è¡Œã€‚

ç»´åº¦å¯¹é½ä¿®å¤ï¼šåŠ¨æ€å…‹éš†æ ¸å‡½æ•°ï¼Œç¡®ä¿å¹¶è¡Œé‡‡é›†æ—¶çš„æ•°å­¦ä¸€è‡´æ€§ã€‚

æ™ºèƒ½çƒ­å¯åŠ¨ï¼šåœ¨ç»“æ„æœªå˜æ—¶å¾®è°ƒæ—§æ¨¡å‹ï¼Œå¤§å¹…æå‡è¿­ä»£é€Ÿåº¦ã€‚

å®Œå¤‡çš„ç›‘æ§ï¼šè‡ªåŠ¨è®°å½• Simple Regretï¼Œæ”¯æŒå¤š Seed å®éªŒçš„è‡ªåŠ¨èšåˆä¸ç»˜å›¾ã€‚

ğŸ› ï¸ å®‰è£…æŒ‡å— (Installation)
æœ¬é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„ Python åŒ…ç»“æ„ (src/ æ¨¡å¼)ï¼Œå»ºè®®ä½¿ç”¨ pip è¿›è¡Œå®‰è£…ã€‚

1. ç¯å¢ƒå‡†å¤‡
Python >= 3.8

CUDA (æ¨èï¼Œç”¨äº GPU åŠ é€Ÿ)

2. å®‰è£…æ­¥éª¤
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š

```Bash
# 1. å®‰è£…ä¾èµ–åº“
pip install -r requirements.txt

# 2. ä»¥å¼€å‘è€…æ¨¡å¼å®‰è£…æœ¬é¡¹ç›® (Editable install)
# è¿™æ ·æ‚¨å¯ä»¥éšæ—¶ä¿®æ”¹ä»£ç è€Œæ— éœ€é‡æ–°å®‰è£…
pip install -e .
```

ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¼€å§‹ (Quick Start)
1. è¿è¡Œå•æ¬¡å®éªŒ
ä½¿ç”¨ scripts/run_experiment.py è„šæœ¬ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼š

```Bash
python scripts/run_experiment.py --config configs/template_full.yaml
```
è¿è¡Œåï¼Œç»“æœå°†ä¿å­˜åœ¨ logs/ ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ logs/Full_Feature_Test_100D/ã€‚

2. é…ç½®æ–‡ä»¶è¯¦è§£
é…ç½®æ–‡ä»¶ (yaml) æ˜¯æ§åˆ¶å®éªŒçš„æ ¸å¿ƒã€‚ä»¥ä¸‹æ˜¯å…³é”®å‚æ•°è¯´æ˜ï¼š

```YAML
experiment:
  name: "My_Experiment"       # å®éªŒåç§°ï¼Œå†³å®šæ—¥å¿—æ–‡ä»¶å¤¹åå­—
  seed: 42                    # éšæœºç§å­
  device: "cuda"

problem:
  name: "stybtang_nd"         # æµ‹è¯•å‡½æ•° (æ”¯æŒ stybtang, rosenbrock, ackley ç­‰)
  dim: 100                    # ç»´åº¦
  optimal_value: -3916.6      # [é‡è¦] ç†è®ºæœ€ä¼˜å€¼ï¼Œç”¨äºè®¡ç®— Regret

optimization:
  n_initial: 20               # åˆå§‹é‡‡æ ·æ•°
  n_total: 300                # æ€»è¿­ä»£æ•°
  switch_threshold: 50        # [å…³é”®] å¤šå°‘è½®ååˆ‡æ¢åˆ°è‡ªé€‚åº”é˜¶æ®µ
  cold_start_interval: 10     # å¼ºåˆ¶é‡è®­æ¨¡å‹çš„é—´éš”

algorithm:
  decomposition_method: "friedman" # ç»“æ„å­¦ä¹ æ–¹æ³•: "shap" æˆ– "friedman"
  background_source: "data"        # Friedman H-stat é…ç½®: "data" æˆ– "uniform"
  
  # é˜ˆå€¼æ§åˆ¶
  interaction_threshold: 0.25      # äº¤äº’é˜ˆå€¼ (è¶Šå°è¶Šå®¹æ˜“æˆç»„)
  importance_threshold: 0.02       # é‡è¦æ€§é˜ˆå€¼
```

ğŸ§ª å¦‚ä½•è¿è¡Œå¯¹æ¯”å®éªŒ (Benchmark Guide)
ä¸ºäº†åœ¨è®ºæ–‡ä¸­å±•ç¤ºç®—æ³•æ€§èƒ½ï¼Œæ‚¨é€šå¸¸éœ€è¦å¯¹æ¯”ä»¥ä¸‹ä¸‰ç§è®¾ç½®ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ config æ–‡ä»¶æ¥å®ç°ã€‚

A. è¿è¡Œ Standard BO (åŸºçº¿)
æ ‡å‡†è´å¶æ–¯ä¼˜åŒ–ä¸è¿›è¡Œç»“æ„åˆ†è§£ï¼Œåœ¨å…¨ç»´ç©ºé—´ç›´æ¥å»ºæ¨¡ã€‚

è®¾ç½®æ–¹æ³•ï¼šå°† switch_threshold è®¾ç½®ä¸º å¤§äºç­‰äº n_totalã€‚

åŸç†ï¼šç®—æ³•å°†ä¸€ç›´åœç•™åœ¨ Phase 1 (StdBO)ï¼Œä¸åšç»“æ„å­¦ä¹ ã€‚

```YAML
optimization:
  n_total: 300
  switch_threshold: 300  # <--- è®¾ä¸ºå…¨è¿‡ç¨‹ Standard BO
```
B. è¿è¡Œ Oracle BO (ä¸Šé™å¯¹ç…§)
å‡è®¾å·²çŸ¥çœŸå®çš„å‡½æ•°ç»“æ„ï¼Œå¼ºåˆ¶ç®—æ³•ä½¿ç”¨è¯¥ç»“æ„ï¼ˆä¸è¿›è¡Œå­¦ä¹ ï¼‰ã€‚

è®¾ç½®æ–¹æ³•ï¼šåœ¨ config ä¸­æ·»åŠ  oracle å­—æ®µã€‚

åŸç†ï¼šoptimizer.py ä¼šæ£€æµ‹åˆ° oracle é…ç½®ï¼Œå°† fixed_decomp è®¾ä¸º Trueï¼Œè·³è¿‡ç»“æ„å‘ç°æ­¥éª¤ã€‚

```YAML
oracle:
  type: "block"          # ç»“æ„ç±»å‹: "block" (åˆ†å—) æˆ– "sparse" (ç¨€ç–)
  param: 5               # å‚æ•°: block_size=5 æˆ– effective_dim=5
```

C. è¿è¡Œ Adaptive BO (æœ¬ç®—æ³•)
ç®—æ³•è‡ªåŠ¨å­¦ä¹ ç»“æ„ã€‚

è®¾ç½®æ–¹æ³•ï¼šè®¾ç½®åˆç†çš„ switch_threshold (å¦‚ 50)ï¼Œå¹¶ç§»é™¤/æ³¨é‡Šæ‰ oracle å­—æ®µã€‚

```YAML
optimization:
  switch_threshold: 50   # å‰50è½®æ¢ç´¢ï¼Œå250è½®è‡ªé€‚åº”
# oracle: ... (æ³¨é‡Šæ‰æ­¤éƒ¨åˆ†)
```


ğŸ“Š ç»“æœå¯è§†åŒ– (Visualization)
å½“æ‚¨é’ˆå¯¹åŒä¸€å‡½æ•°è¿è¡Œäº†å¤šä¸ªå®éªŒï¼ˆä¾‹å¦‚ä¸åŒçš„ç®—æ³•ï¼Œæˆ–è€…åŒä¸€ç®—æ³•ä¸åŒçš„éšæœºç§å­ï¼‰åï¼Œå¯ä»¥ä½¿ç”¨ scripts/plot_results.py ä¸€é”®ç”Ÿæˆå¯¹æ¯”å›¾ã€‚

1. æ•°æ®å‡†å¤‡
å‡è®¾æ‚¨è¿è¡Œäº†ä»¥ä¸‹å®éªŒï¼Œå¹¶ç”Ÿæˆäº†å¯¹åº”çš„æ—¥å¿—ç›®å½•ï¼š

Adaptive BO: logs/Adapt_Seed1, logs/Adapt_Seed2, logs/Adapt_Seed3

Standard BO: logs/Std_Seed1, logs/Std_Seed2, logs/Std_Seed3

2. ç»˜å›¾å‘½ä»¤
ä½¿ç”¨é€šé…ç¬¦ (*) åŒ¹é…ç›®å½•ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è®¡ç®— å‡å€¼ (Mean) å’Œ æ ‡å‡†è¯¯ (Standard Error) å¹¶ç»˜åˆ¶é˜´å½±å¸¦ã€‚

```Bash
python scripts/plot_results.py \
  --labels "Adaptive BO" "Standard BO" \
  --patterns "logs/Adapt_*" "logs/Std_*" \
  --title "Stybtang 100D Performance Comparison" \
  --output comparison_plot.png \
  --linear  # (å¯é€‰) ä½¿ç”¨çº¿æ€§åæ ‡è½´ï¼Œä¸åŠ åˆ™é»˜è®¤ Log åæ ‡
```
--labels: å›¾ä¾‹åç§°ï¼Œç©ºæ ¼åˆ†éš”ã€‚

--patterns: å¯¹åº”çš„æ—¥å¿—ç›®å½•è·¯å¾„æ¨¡å¼ï¼ˆæ”¯æŒ glob é€šé…ç¬¦ï¼‰ã€‚

ğŸ“‚ é¡¹ç›®ç»“æ„è¯´æ˜
```Plaintext
bo_project/
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®ä¸ä¾èµ–å®šä¹‰
â”œâ”€â”€ requirements.txt         # ä¾èµ–ç‰ˆæœ¬é”å®š
â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶å­˜æ”¾å¤„
â”‚   â””â”€â”€ template_full.yaml   # å…¨å‚æ•°é…ç½®æ¨¡æ¿
â”œâ”€â”€ logs/                    # å®éªŒç»“æœè¾“å‡º (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ scripts/                 # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ run_experiment.py    # å®éªŒå…¥å£
â”‚   â””â”€â”€ plot_results.py      # ç»˜å›¾å·¥å…·
â””â”€â”€ src/
    â””â”€â”€ bo_core/             # æ ¸å¿ƒä»£ç åŒ…
        â”œâ”€â”€ optimizer.py     # AdaptiveBO ä¸»é€»è¾‘
        â”œâ”€â”€ config_manager.py# é…ç½®è§£æå™¨
        â”œâ”€â”€ test_functions.py# æµ‹è¯•å‡½æ•°åº“
        â”œâ”€â”€ utils.py         # [é—æ¼è¡¥å……] é€šç”¨å·¥å…· (æ—¥å¿—ã€Seedã€é¢‘ç‡è°ƒåº¦ç­‰)
        â”œâ”€â”€ components/
        â”‚   â”œâ”€â”€ decomposition.py # ç»“æ„å­¦ä¹  (SHAP/Friedman)
        â”‚   â”œâ”€â”€ acquisition.py   # å¹¶è¡Œé‡‡é›†å‡½æ•°ä¼˜åŒ–
        â”‚   â””â”€â”€ visualizer.py    # ç»˜å›¾åç«¯é€»è¾‘
        â””â”€â”€ models/
            â””â”€â”€ additive_gp.py   # åŠ æ€§é«˜æ–¯è¿‡ç¨‹æ¨¡å‹
```

âš ï¸ å¸¸è§é—®é¢˜ (FAQ)
Q: ç¨‹åºè¿è¡Œå¾ˆä¹…åæ˜¾å­˜æº¢å‡º (OOM) æ€ä¹ˆåŠï¼Ÿ

A: æœ¬ä»£ç å·²å†…ç½®æ˜¾å­˜è‡ªåŠ¨æ¸…ç†æœºåˆ¶ã€‚å¦‚æœä¾ç„¶ OOMï¼Œå°è¯•åœ¨ config ä¸­å¢å¤§ cold_start_intervalï¼ˆå‡å°‘é‡æ„é¢‘ç‡ï¼‰æˆ–æ£€æŸ¥ decomposition_finder.py ä¸­çš„ Batch Sizeã€‚

Q: ä¸ºä»€ä¹ˆ Regret æ˜¯ Noneï¼Ÿ

A: è¯·æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦è®¾ç½®äº†æ­£ç¡®çš„ optimal_valueã€‚å¦‚æœæ²¡æœ‰ç†è®ºæœ€ä¼˜å€¼ï¼Œæ— æ³•è®¡ç®— Regretã€‚

Q: å¦‚ä½•æ·»åŠ æ–°çš„æµ‹è¯•å‡½æ•°ï¼Ÿ

A: åœ¨ src/bo_core/test_functions.py ä¸­å®šä¹‰å‡½æ•°ï¼Œå¹¶åœ¨ get_function å­—å…¸ä¸­æ³¨å†Œå³å¯ã€‚
